- pipeline: "build"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  actions:
  - action: "Upload files"
    type: "SFTP"
    input_type: "SCM_REPOSITORY"
    local_path: "/"
    remote_path: "/home/nery/ThrustApp/"
    login: "nery"
    password: "2017@tec"
    host: "35.196.155.216"
    port: "22"
    authentication_mode: "PASS"
  - action: "Execute Thrust"
    type: "SSH_COMMAND"
    login: "nery"
    password: "2017@tec"
    host: "35.196.155.216"
    port: "22"
    authentication_mode: "PASS"
    commands:
    - "/usr/bin/killall -15 -q java > /dev/null  2>&1  &"
    - "cd /home/nery/ThrustApp/ && thrust install > install.log  2>&1  &"
    - "thrust ./ThrustApp/startup.js > server.log  2>&1  &"
    - "sleep 10"
    - "ps aux | grep java"
    trigger_condition: "ALWAYS"
